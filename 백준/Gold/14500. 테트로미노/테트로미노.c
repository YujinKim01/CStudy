#include <stdio.h>

#define MAX 500

int N, M;
int board[MAX][MAX];
int max_sum = 0;

// 테트로미노 상대 좌표
int tetromino[19][4][2] = {
    // ㅡ자
    {{0,0}, {0,1}, {0,2}, {0,3}}, 
    {{0,0}, {1,0}, {2,0}, {3,0}}, 

    // ㅁ자
    {{0,0}, {0,1}, {1,0}, {1,1}}, 

    // L자
    {{0,0}, {1,0}, {2,0}, {2,1}}, 
    {{0,0}, {1,0}, {2,0}, {2,-1}}, 
    {{0,0}, {0,1}, {0,2}, {1,0}}, 
    {{0,0}, {0,1}, {0,2}, {1,2}}, 
    {{0,0}, {0,1}, {1,1}, {2,1}}, 
    {{0,0}, {0,1}, {1,0}, {2,0}}, 
    {{0,0}, {0,1}, {0,2}, {-1,0}}, 
    {{0,0}, {0,1}, {0,2}, {-1,2}}, 

    // Z자
    {{0,0}, {1,0}, {1,1}, {2,1}}, 
    {{0,0}, {0,1}, {-1,1}, {-1,2}}, 
    {{0,0}, {0,1}, {1,1}, {1,2}}, 
    {{0,0}, {1,0}, {1,-1}, {2,-1}}, 

    // T자
    {{0,0}, {0,1}, {0,2}, {1,1}}, 
    {{0,0}, {1,0}, {2,0}, {1,1}}, 
    {{0,0}, {0,1}, {0,2}, {-1,1}}, 
    {{0,0}, {1,0}, {2,0}, {1,-1}}  
};

// 브루트포스 탐색
void search() {
    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            for (int t = 0; t < 19; t++) {
                int sum = 0;
                int valid = 1;

                for (int k = 0; k < 4; k++) {
                    int ni = i + tetromino[t][k][0];
                    int nj = j + tetromino[t][k][1];

                    if (ni < 0 || nj < 0 || ni >= N || nj >= M) {
                        valid = 0;
                        break;
                    }
                    sum += board[ni][nj];
                }

                if (valid && sum > max_sum) max_sum = sum;
            }
        }
    }
}

int main() {
    scanf("%d %d", &N, &M);

    for (int i = 0; i < N; i++) {
        for (int j = 0; j < M; j++) {
            scanf("%d", &board[i][j]);
        }
    }

    search();

    printf("%d\n", max_sum);
    return 0;
}